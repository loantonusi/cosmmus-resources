%!TEX root =  main.tex
\section{The centralized partitioning scheme}

\fp{Here we should describe the new scheme, which computes partitions on the fly based on feedback from the oracle}

%Partitioning 
In \appname, the partitioning 

\subsection{Dynamic repartitioning}
%Why do we want that?
The ability to execute a repartition on-the-fly is crucial to systems that 

\begin{figure}
	\includegraphics[width=1.0\linewidth]{graphs/0.01_edgecuts/repartition/4-2-1-2-4/edge_cut_balance_max_4_part}
	\caption{Multiple repartitioning in the same execution.}
	\label{fig:repartition_4_times}
\end{figure}

%How do we do a repartitioning?
Whenever an external agent or the oracle itself decide that there should be a new partitioning, a \emph{Partition} command is sent to the oracle, which executes the respective step in algorithm~\ref{alg:oracle_partition}. The system continues to operate normally while the partitioning is taking place.

%What if a client is caught in the middle of repartitioning
When a client issues a command and a repartitioning was applied before, like seen in figure~\ref{fig:oracle_repartition}, that command will fail and the client is going to be requested to update the version of its cache to the one replied by the oracle.


\input{algorithm_oracle_partition}

\begin{figure*}
\begin{minipage}[b]{1\linewidth} % A minipage that covers the whole width of the page
\centering
      \includegraphics[width=1.0\linewidth]{figures/repartitioning}
\end{minipage}
\caption{How commands are treated in case of a repartitioning in the oracle.}
\label{fig:oracle_repartition}
\end{figure*}
